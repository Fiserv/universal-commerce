| How to avoid duplicate transactions? |
| --- |

# How to avoid duplicate transactions?

The uCommerce API is equipped with idempotency operations, which could prevent things like duplicate transactions. To take advantage of the API's idempotency, simply include the Client-Request-Id in the header of the payload. The Client-Request-Id Contains a unique ID generated by the App that can be used for enforcing idempotency on POST actions or calls. Therefore, to avoid duplicate transactions, the app must ensure that the same Client-Request-Id is sent for the same customer and transaction. In other words, the front end/app cannot change the Client-Request-Id for the same transaction in case of a communication failure between the app and the Fiserv API to avoid duplicate transactions.

## Sample API header with Client-Request-Id

### Sample Header

| Sample Format and Values (Nonce in payload) |
| --- |
| Content-Type:application/jsonApi-Key:{{key}}Authorization:HMAC {{signature}}Timestamp:{{time}}Client-Request-Id:{{$guid}}Client-Token: {{tokenId}}
Content-Type: application/jsonApi-Key: pAhDVh6ALjje4zja5W24PlhvL3A3mJSAAuthorization: HMAC yMHQiDA2qHVy1t/WX3AdvQawoIWH5m/o3/dIit40rY=Timestamp: 1501621439636Client-Request-Id: 123445241Client-Token: e3W0jHqpuutK6vwtlOt80GWvwBI0 |
| --- |